<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<title>Pay â€“ Andrew's Tech Repair & Sales</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,400&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
:root{
  --bg:#0b0d13;
  --surface:#13161f;
  --card:#1a1e2b;
  --card2:#1f2333;
  --border:rgba(255,255,255,0.08);
  --border2:rgba(255,255,255,0.13);
  --accent:#00e5ff;
  --accent2:#6c3fff;
  --text:#eef0f5;
  --muted:#6e7a96;
  --muted2:#9aa3bc;
  --success:#00e5a0;
  --warn:#ffb800;
  --danger:#ff4060;
  --wa:#25d366;
  --radius:18px;
  --radius-sm:11px;
}
html{scroll-behavior:smooth;}
body{
  background:var(--bg);
  color:var(--text);
  font-family:'DM Sans',sans-serif;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:24px 14px 90px;
  position:relative;
  overflow-x:hidden;
  -webkit-tap-highlight-color:transparent;
}
body::before{
  content:'';position:fixed;top:-200px;left:-150px;
  width:500px;height:500px;
  background:radial-gradient(circle,rgba(0,229,255,0.10) 0%,transparent 70%);
  pointer-events:none;z-index:0;
}
body::after{
  content:'';position:fixed;bottom:-220px;right:-180px;
  width:600px;height:600px;
  background:radial-gradient(circle,rgba(108,63,255,0.10) 0%,transparent 70%);
  pointer-events:none;z-index:0;
}
.page{width:100%;max-width:480px;position:relative;z-index:1;}

/* â”€â”€ HEADER â”€â”€ */
.header{text-align:center;margin-bottom:28px;animation:fadeUp .6s ease both;}
.logo-wrap{
position:relative;display:inline-block;
margin-bottom:14px;cursor:pointer;
}
.logo-img{
width:80px;height:80px;border-radius:22px;
background:linear-gradient(135deg,var(â€“accent2),var(â€“accent));
display:flex;align-items:center;justify-content:center;
font-size:34px;
box-shadow:0 0 40px rgba(0,229,255,0.20);
overflow:hidden;
}
.logo-img img{width:100%;height:100%;object-fit:cover;display:none;}
.logo-img img.loaded{display:block;}
.logo-edit-badge{
position:absolute;bottom:-4px;right:-4px;
background:var(â€“warn);
color:#000;font-size:11px;font-family:â€˜Syneâ€™,sans-serif;font-weight:700;
padding:3px 7px;border-radius:20px;
display:none;
}
.biz-name{
font-family:â€˜Syneâ€™,sans-serif;font-weight:800;
font-size:clamp(20px,5.5vw,26px);letter-spacing:-0.4px;line-height:1.15;
background:linear-gradient(120deg,#fff 25%,var(â€“accent));
-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.tagline{color:var(â€“muted);font-size:13px;margin-top:5px;}

/* â”€â”€ AMOUNT â”€â”€ */
.amount-box{
background:var(â€“surface);border:1px solid var(â€“border);
border-radius:var(â€“radius);padding:20px;margin-bottom:22px;
animation:fadeUp .6s .08s ease both;
}
.field-label{
font-size:10px;letter-spacing:.14em;text-transform:uppercase;
color:var(â€“muted);margin-bottom:9px;
}
.amount-row{display:flex;align-items:center;gap:9px;}
.currency-pill{
font-family:â€˜Syneâ€™,sans-serif;font-size:16px;font-weight:700;
color:var(â€“accent);background:rgba(0,229,255,0.09);
padding:10px 13px;border-radius:var(â€“radius-sm);
border:1px solid rgba(0,229,255,0.22);white-space:nowrap;
}
.amount-input{
flex:1;background:rgba(255,255,255,0.04);
border:1px solid var(â€“border);border-radius:var(â€“radius-sm);
color:var(â€“text);font-family:â€˜Syneâ€™,sans-serif;
font-size:24px;font-weight:700;padding:10px 13px;
outline:none;width:100%;transition:border-color .2s;
-webkit-appearance:none;
}
.amount-input::placeholder{color:var(â€“muted);font-weight:400;font-size:15px;font-family:â€˜DM Sansâ€™,sans-serif;}
.amount-input:focus{border-color:rgba(0,229,255,0.45);}
.note-input{
width:100%;background:rgba(255,255,255,0.04);
border:1px solid var(â€“border);border-radius:var(â€“radius-sm);
color:var(â€“text);font-family:â€˜DM Sansâ€™,sans-serif;
font-size:14px;padding:10px 13px;margin-top:11px;
outline:none;resize:none;transition:border-color .2s;
}
.note-input::placeholder{color:var(â€“muted);}
.note-input:focus{border-color:rgba(0,229,255,0.4);}

/* â”€â”€ SECTION LABEL â”€â”€ */
.sec-label{
font-size:10px;letter-spacing:.14em;text-transform:uppercase;
color:var(â€“muted);margin-bottom:12px;padding-left:2px;
}

/* â”€â”€ PAYMENT METHODS â”€â”€ */
.methods-list{display:flex;flex-direction:column;gap:10px;animation:fadeUp .6s .16s ease both;}

/* Clickable card (Lynk, PayPal, custom) */
.pay-card{
background:var(â€“card);border:1px solid var(â€“border);
border-radius:var(â€“radius);padding:16px 18px;
display:flex;align-items:center;gap:14px;
cursor:pointer;
transition:border-color .22s,transform .18s,box-shadow .22s;
user-select:none;text-decoration:none;color:var(â€“text);
position:relative;overflow:hidden;
-webkit-tap-highlight-color:transparent;
min-height:72px;
}
.pay-card::before{
content:â€™â€™;position:absolute;inset:0;
background:linear-gradient(120deg,transparent 20%,rgba(255,255,255,0.04) 50%,transparent 80%);
transform:translateX(-120%);transition:transform .5s ease;
}
.pay-card:active::before,.pay-card:hover::before{transform:translateX(120%);}
.pay-card:active{transform:scale(0.98);opacity:.9;}
@media(hover:hover){
.pay-card:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(0,0,0,.3);}
}

/* Bank expand card */
.bank-card{
background:var(â€“card);border:1px solid var(â€“border);
border-radius:var(â€“radius);overflow:hidden;
transition:box-shadow .22s;
}
.bank-header{
padding:16px 18px;display:flex;align-items:center;gap:14px;
cursor:pointer;user-select:none;min-height:72px;
-webkit-tap-highlight-color:transparent;
}
.bank-details{
display:none;
border-top:1px solid var(â€“border);
padding:14px 18px;
background:rgba(0,198,255,0.03);
animation:fadeUp .2s ease both;
}
.bank-details.open{display:block;}

.method-icon{
width:46px;height:46px;border-radius:13px;
display:flex;align-items:center;justify-content:center;
font-size:20px;flex-shrink:0;overflow:hidden;
}
.method-icon img{width:100%;height:100%;object-fit:cover;border-radius:13px;}
.icon-lynk  {background:linear-gradient(135deg,#1a1aff,#6c00ff);}
.icon-bank  {background:linear-gradient(135deg,#007bff,#00c6ff);}
.icon-paypal{background:linear-gradient(135deg,#003087,#009cde);}
.icon-custom{background:linear-gradient(135deg,#2a2a3a,#3a3a55);}

.method-info{flex:1;min-width:0;}
.method-name{font-family:â€˜Syneâ€™,sans-serif;font-size:15px;font-weight:700;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.method-sub{font-size:12px;color:var(â€“muted);}

.pay-badge{
font-size:10px;font-family:â€˜Syneâ€™,sans-serif;font-weight:700;
padding:4px 9px;border-radius:100px;white-space:nowrap;flex-shrink:0;
}
.badge-go    {background:rgba(0,229,255,0.12);color:var(â€“accent);border:1px solid rgba(0,229,255,0.25);}
.badge-detail{background:rgba(255,255,255,0.05);color:var(â€“muted);border:1px solid var(â€“border);}

.chevron{
color:var(â€“muted);font-size:16px;flex-shrink:0;
transition:transform .25s ease,color .2s;
}
.bank-header.open .chevron{transform:rotate(90deg);color:var(â€“accent);}

/* Bank detail rows */
.d-row{
display:flex;justify-content:space-between;align-items:center;
padding:6px 0;border-bottom:1px solid var(â€“border);gap:8px;
}
.d-row:last-of-type{border-bottom:none;}
.d-key{color:var(â€“muted);font-size:11px;flex-shrink:0;min-width:80px;}
.d-val{font-weight:500;word-break:break-all;font-size:12px;flex:1;}
.copy-btn{
background:rgba(0,229,255,0.09);border:1px solid rgba(0,229,255,0.2);
color:var(â€“accent);border-radius:7px;padding:3px 9px;
font-size:11px;cursor:pointer;white-space:nowrap;
font-family:â€˜DM Sansâ€™,sans-serif;transition:background .2s;
-webkit-tap-highlight-color:transparent;
}
.copy-btn:active{background:rgba(0,229,255,0.22);}
.d-hint{margin-top:8px;font-size:11px;color:var(â€“muted);line-height:1.5;}

/* â”€â”€ SHARE ROW â”€â”€ */
.share-row{
display:flex;gap:9px;margin-top:20px;
animation:fadeUp .6s .24s ease both;
}
.share-btn{
flex:1;display:flex;align-items:center;justify-content:center;
gap:7px;padding:13px 8px;border-radius:var(â€“radius-sm);
font-family:â€˜Syneâ€™,sans-serif;font-size:13px;font-weight:700;
cursor:pointer;border:none;transition:opacity .2s,transform .15s;
-webkit-tap-highlight-color:transparent;
}
.share-btn:active{opacity:.8;transform:scale(.97);}
.share-btn.primary{background:linear-gradient(135deg,var(â€“accent2),var(â€“accent));color:#000;}
.share-btn.secondary{background:var(â€“surface);color:var(â€“text);border:1px solid var(â€“border);}

/* â”€â”€ CONTACT BAR â”€â”€ */
.contact-bar{
margin-top:16px;background:var(â€“surface);
border:1px solid var(â€“border);border-radius:var(â€“radius);
padding:14px 18px;display:flex;align-items:center;
justify-content:space-between;gap:10px;flex-wrap:wrap;
animation:fadeUp .6s .30s ease both;
}
.contact-info{flex:1;}
.contact-label{font-size:10px;letter-spacing:.1em;text-transform:uppercase;color:var(â€“muted);margin-bottom:3px;}
.contact-number{font-family:â€˜Syneâ€™,sans-serif;font-size:15px;font-weight:700;}
.contact-btns{display:flex;gap:8px;flex-shrink:0;}
.c-btn{
display:inline-flex;align-items:center;gap:5px;
padding:8px 14px;border-radius:var(â€“radius-sm);
font-family:â€˜Syneâ€™,sans-serif;font-size:12px;font-weight:700;
text-decoration:none;border:none;cursor:pointer;
transition:opacity .2s;-webkit-tap-highlight-color:transparent;
}
.c-btn:active{opacity:.8;}
.btn-call{background:linear-gradient(135deg,#00c853,#00e5a0);color:#000;}
.btn-wa  {background:linear-gradient(135deg,#128c3b,var(â€“wa));color:#fff;}

/* â”€â”€ EDIT TOGGLE â”€â”€ */
.edit-toggle-wrap{text-align:center;margin-top:22px;animation:fadeUp .6s .36s ease both;}
.edit-toggle-btn{
background:none;border:1px solid var(â€“border);color:var(â€“muted);
font-family:â€˜DM Sansâ€™,sans-serif;font-size:13px;
padding:9px 22px;border-radius:100px;cursor:pointer;
transition:border-color .2s,color .2s;
-webkit-tap-highlight-color:transparent;
}
.edit-toggle-btn:active{border-color:var(â€“warn);color:var(â€“warn);}
@media(hover:hover){.edit-toggle-btn:hover{border-color:var(â€“warn);color:var(â€“warn);}}

/* â”€â”€ FOOTER â”€â”€ */
.footer{text-align:center;margin-top:24px;color:var(â€“muted);font-size:11px;animation:fadeUp .6s .42s ease both;}

/* â”€â”€ PASSWORD MODAL â”€â”€ */
.modal-overlay{
position:fixed;inset:0;background:rgba(0,0,0,.75);
backdrop-filter:blur(8px);display:none;
align-items:flex-end;justify-content:center;z-index:200;
}
.modal-overlay.open{display:flex;}
.modal{
background:var(â€“card);border:1px solid var(â€“border2);
border-radius:24px 24px 0 0;padding:28px 22px 36px;
width:100%;max-width:480px;
animation:slideUp .35s cubic-bezier(.34,1.2,.64,1) both;
}
@media(min-height:600px){
.modal-overlay{align-items:center;}
.modal{border-radius:24px;max-width:380px;padding:32px 28px;}
}
.modal-handle{
width:40px;height:4px;border-radius:2px;
background:var(â€“border2);margin:0 auto 20px;
}
.modal-title{font-family:â€˜Syneâ€™,sans-serif;font-size:17px;font-weight:800;margin-bottom:5px;}
.modal-sub{color:var(â€“muted);font-size:13px;margin-bottom:18px;}
.modal-input{
width:100%;background:rgba(255,255,255,0.05);
border:1px solid var(â€“border);border-radius:var(â€“radius-sm);
color:var(â€“text);font-family:â€˜DM Sansâ€™,sans-serif;
font-size:16px;padding:12px 14px;outline:none;margin-bottom:10px;
transition:border-color .2s;letter-spacing:.08em;
-webkit-appearance:none;
}
.modal-input:focus{border-color:rgba(0,229,255,.45);}
.modal-input.err{border-color:var(â€“danger);}
.modal-error{color:var(â€“danger);font-size:12px;margin-bottom:10px;display:none;}
.modal-btns{display:flex;gap:9px;margin-top:6px;}
.modal-btn{
flex:1;padding:13px;border-radius:var(â€“radius-sm);
font-family:â€˜Syneâ€™,sans-serif;font-size:14px;font-weight:700;
cursor:pointer;border:none;transition:opacity .2s;
-webkit-tap-highlight-color:transparent;
}
.modal-btn:active{opacity:.8;}
.modal-btn.confirm{background:linear-gradient(135deg,var(â€“accent2),var(â€“accent));color:#000;}
.modal-btn.cancel {background:var(â€“surface);color:var(â€“muted);border:1px solid var(â€“border);}

/* â”€â”€ EDIT PANEL (full scrollable drawer) â”€â”€ */
.edit-panel{
display:none;
background:var(â€“surface);
border:1px solid rgba(255,184,0,.35);
border-radius:var(â€“radius);padding:20px;margin-top:20px;
}
.edit-panel.open{display:block;animation:fadeUp .3s ease both;}
.ep-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;}
.ep-title{font-family:â€˜Syneâ€™,sans-serif;font-size:14px;font-weight:800;color:var(â€“warn);}
.ep-close{background:none;border:none;color:var(â€“muted);font-size:22px;cursor:pointer;line-height:1;padding:2px;}
.ep-close:active{color:var(â€“danger);}

.ep-section{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid var(â€“border);}
.ep-section:last-of-type{border-bottom:none;margin-bottom:0;padding-bottom:0;}
.ep-sec-title{
font-family:â€˜Syneâ€™,sans-serif;font-size:12px;font-weight:800;
color:var(â€“muted2);letter-spacing:.06em;text-transform:uppercase;
margin-bottom:12px;display:flex;align-items:center;justify-content:space-between;
}
.ep-field{margin-bottom:10px;}
.ep-field:last-child{margin-bottom:0;}
.ep-field label{display:block;font-size:10px;letter-spacing:.1em;text-transform:uppercase;color:var(â€“muted);margin-bottom:5px;}
.ep-field input,.ep-field select,.ep-field textarea{
width:100%;background:rgba(255,255,255,0.04);
border:1px solid var(â€“border);border-radius:var(â€“radius-sm);
color:var(â€“text);font-family:â€˜DM Sansâ€™,sans-serif;
font-size:14px;padding:9px 12px;outline:none;
transition:border-color .2s;-webkit-appearance:none;
}
.ep-field input:focus,.ep-field select:focus,.ep-field textarea:focus{border-color:rgba(255,184,0,.45);}
.ep-field .hint{font-size:10px;color:var(â€“muted);margin-top:4px;line-height:1.4;}
.ep-field select{background-image:url(â€œdata:image/svg+xml,%3Csvg xmlns=â€˜http://www.w3.org/2000/svgâ€™ width=â€˜12â€™ height=â€˜12â€™ viewBox=â€˜0 0 12 12â€™%3E%3Cpath fill=â€™%236e7a96â€™ d=â€˜M6 8L1 3h10zâ€™/%3E%3C/svg%3Eâ€);background-repeat:no-repeat;background-position:right 12px center;padding-right:32px;}
.ep-field select option{background:#1a1e2b;}

/* add row cards inside edit panel */
.added-item{
background:var(â€“card2);border:1px solid var(â€“border);
border-radius:var(â€“radius-sm);padding:10px 13px;
display:flex;align-items:center;gap:10px;margin-bottom:8px;
}
.added-item-name{flex:1;font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.del-btn{
background:rgba(255,64,96,.12);border:1px solid rgba(255,64,96,.25);
color:var(â€“danger);border-radius:7px;padding:4px 9px;
font-size:11px;cursor:pointer;font-family:â€˜DM Sansâ€™,sans-serif;
-webkit-tap-highlight-color:transparent;white-space:nowrap;
}
.del-btn:active{background:rgba(255,64,96,.25);}

.add-row-btn{
width:100%;padding:10px;border-radius:var(â€“radius-sm);
background:rgba(255,255,255,0.04);border:1px dashed var(â€“border2);
color:var(â€“muted2);font-family:â€˜Syneâ€™,sans-serif;font-size:12px;font-weight:700;
cursor:pointer;transition:background .2s,border-color .2s;
-webkit-tap-highlight-color:transparent;margin-top:4px;
}
.add-row-btn:active{background:rgba(255,255,255,0.08);border-color:var(â€“warn);}

/* add form inside edit panel */
.add-form{
background:var(â€“card);border:1px solid var(â€“border);
border-radius:var(â€“radius-sm);padding:14px;margin-top:8px;
display:none;
}
.add-form.open{display:block;animation:fadeUp .2s ease both;}
.add-form-title{font-family:â€˜Syneâ€™,sans-serif;font-size:12px;font-weight:700;color:var(â€“muted2);margin-bottom:10px;}
.add-form .ep-field{margin-bottom:8px;}
.form-btns{display:flex;gap:8px;margin-top:10px;}
.form-btn{
flex:1;padding:9px;border-radius:var(â€“radius-sm);
font-family:â€˜Syneâ€™,sans-serif;font-size:12px;font-weight:700;
cursor:pointer;border:none;-webkit-tap-highlight-color:transparent;
}
.form-btn.confirm{background:linear-gradient(135deg,var(â€“accent2),var(â€“accent));color:#000;}
.form-btn.cancel {background:var(â€“surface);color:var(â€“muted);border:1px solid var(â€“border);}

/* logo upload */
.logo-upload-area{
border:2px dashed var(â€“border2);border-radius:var(â€“radius-sm);
padding:18px;text-align:center;cursor:pointer;
transition:border-color .2s;-webkit-tap-highlight-color:transparent;
}
.logo-upload-area:active{border-color:var(â€“warn);}
.logo-upload-label{font-size:13px;color:var(â€“muted2);display:block;cursor:pointer;}
.logo-preview{
width:60px;height:60px;border-radius:14px;margin:0 auto 10px;
background:linear-gradient(135deg,var(â€“accent2),var(â€“accent));
display:flex;align-items:center;justify-content:center;
font-size:26px;overflow:hidden;
}
.logo-preview img{width:100%;height:100%;object-fit:cover;display:none;}
.logo-preview img.loaded{display:block;}
#logoFileInput{display:none;}

.save-btn{
width:100%;margin-top:20px;
background:linear-gradient(135deg,#ffb800,#ff7c00);
border:none;border-radius:var(â€“radius-sm);
color:#000;font-family:â€˜Syneâ€™,sans-serif;
font-size:15px;font-weight:800;padding:14px;
cursor:pointer;transition:opacity .2s;
-webkit-tap-highlight-color:transparent;
}
.save-btn:active{opacity:.85;}

/* â”€â”€ TOAST â”€â”€ */
.toast{
position:fixed;bottom:28px;left:50%;
transform:translateX(-50%) translateY(100px);
background:var(â€“success);color:#000;
font-family:â€˜Syneâ€™,sans-serif;font-weight:700;font-size:13px;
padding:11px 22px;border-radius:100px;z-index:999;
transition:transform .38s cubic-bezier(.34,1.56,.64,1);
white-space:nowrap;pointer-events:none;max-width:90vw;text-align:center;
}
.toast.show{transform:translateX(-50%) translateY(0);}
.toast.warn{background:var(â€“warn);}
.toast.err{background:var(â€“danger);color:#fff;}

@keyframes fadeUp{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}
@keyframes slideUp{from{opacity:0;transform:translateY(60px);}to{opacity:1;transform:translateY(0);}}
</style>

</head>
<body>
<div class="page">

  <!-- HEADER -->

  <div class="header">
    <div class="logo-wrap" id="logoWrap" title="Edit logo in settings">
      <div class="logo-img" id="logoDisplay"><span id="logoEmoji">ğŸ”§</span><img id="logoImgEl" alt="logo"/></div>
      <div class="logo-edit-badge" id="logoBadge">âœï¸</div>
    </div>
    <div class="biz-name" id="dispBizName">Andrew's Tech Repair & Sales</div>
    <div class="tagline">Enter amount Â· Choose a payment method</div>
  </div>

  <!-- AMOUNT -->

  <div class="amount-box">
    <div class="field-label">Payment Due</div>
    <div class="amount-row">
      <div class="currency-pill">JMD $</div>
      <input class="amount-input" type="number" id="amountInput" inputmode="decimal" placeholder="0.00" min="0"/>
    </div>
    <textarea class="note-input" rows="2" id="noteInput" placeholder="Note (e.g. iPhone screen repair â€“ Invoice #004)"></textarea>
  </div>

  <!-- METHODS -->

  <div class="sec-label">Select Payment Method</div>
  <div class="methods-list" id="methodsList">

```
<!-- LYNK (built-in) -->
<div class="pay-card" id="lynkCard" onclick="openLink('lynk')">
  <div class="method-icon icon-lynk" id="lynkIcon"><span>ğŸ“²</span></div>
  <div class="method-info">
    <div class="method-name">Lynk</div>
    <div class="method-sub">Tap to pay via Lynk</div>
  </div>
  <span class="pay-badge badge-go">Pay Now</span>
  <span class="chevron">â€º</span>
</div>

<!-- BANK (built-in, expandable) -->
<div class="bank-card" id="bankCard">
  <div class="bank-header" id="bankHeader" onclick="toggleBank('bankDetails','bankHeader')">
    <div class="method-icon icon-bank" id="bankIcon"><span>ğŸ¦</span></div>
    <div class="method-info">
      <div class="method-name">Bank Transfer</div>
      <div class="method-sub">Tap to view account details</div>
    </div>
    <span class="pay-badge badge-detail">Details</span>
    <span class="chevron">â€º</span>
  </div>
  <div class="bank-details" id="bankDetails">
    <div class="d-row"><span class="d-key">Bank</span><span class="d-val" id="d_bankName">â€”</span><button class="copy-btn" onclick="cpv('d_bankName',this)">Copy</button></div>
    <div class="d-row"><span class="d-key">Acc. Name</span><span class="d-val" id="d_bankAccName">â€”</span><button class="copy-btn" onclick="cpv('d_bankAccName',this)">Copy</button></div>
    <div class="d-row"><span class="d-key">Account #</span><span class="d-val" id="d_bankAccNum">â€”</span><button class="copy-btn" onclick="cpv('d_bankAccNum',this)">Copy</button></div>
    <div class="d-row"><span class="d-key">Routing #</span><span class="d-val" id="d_bankRouting">â€”</span><button class="copy-btn" onclick="cpv('d_bankRouting',this)">Copy</button></div>
    <div class="d-hint">Use your name + invoice number as the transfer reference.</div>
  </div>
</div>

<!-- PAYPAL (built-in) -->
<div class="pay-card" id="paypalCard" onclick="openLink('paypal')">
  <div class="method-icon icon-paypal" id="paypalIcon"><span>ğŸ…¿ï¸</span></div>
  <div class="method-info">
    <div class="method-name">PayPal</div>
    <div class="method-sub">Tap to pay via PayPal</div>
  </div>
  <span class="pay-badge badge-go">Pay Now</span>
  <span class="chevron">â€º</span>
</div>

<!-- EXTRA PAYMENT METHODS injected here -->
<div id="extraMethods"></div>

<!-- EXTRA BANKS injected here -->
<div id="extraBanks"></div>
```

  </div>

  <!-- SHARE -->

  <div class="share-row">
    <button class="share-btn secondary" onclick="copyLink()">ğŸ”— Copy Link</button>
    <button class="share-btn primary" onclick="shareWA()">ğŸ’¬ WhatsApp</button>
  </div>

  <!-- CONTACT BAR -->

  <div class="contact-bar">
    <div class="contact-info">
      <div class="contact-label">Contact Us</div>
      <div class="contact-number" id="dispPhone">876-XXX-XXXX</div>
    </div>
    <div class="contact-btns">
      <a id="callBtn" href="tel:" class="c-btn btn-call">ğŸ“ Call</a>
      <a id="waContactBtn" href="#" target="_blank" class="c-btn btn-wa">ğŸ’¬ Chat</a>
    </div>
  </div>

  <!-- EDIT TOGGLE -->

  <div class="edit-toggle-wrap">
    <button class="edit-toggle-btn" onclick="openPassModal()">âš™ï¸ Edit Payment Details</button>
  </div>

  <!-- EDIT PANEL -->

  <div class="edit-panel" id="editPanel">
    <div class="ep-header">
      <div class="ep-title">âœï¸ Edit Mode</div>
      <button class="ep-close" onclick="closeEdit()">âœ•</button>
    </div>

```
<!-- Logo & Business Name -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ–¼ Logo & Business Name</div>
  <div class="logo-upload-area" onclick="document.getElementById('logoFileInput').click()">
    <div class="logo-preview" id="editLogoPreview"><span id="editLogoEmoji">ğŸ”§</span><img id="editLogoImg" alt=""/></div>
    <label class="logo-upload-label">Tap to upload logo image<br/><span style="font-size:10px;color:var(--muted)">JPG, PNG, GIF â€” replaces emoji</span></label>
  </div>
  <input type="file" id="logoFileInput" accept="image/*" onchange="handleLogoUpload(this)"/>
  <div class="ep-field" style="margin-top:10px;">
    <label>Logo Emoji (used if no image)</label>
    <input type="text" id="edit_logoEmoji" placeholder="e.g. ğŸ”§ ğŸ–¥ï¸ ğŸ“±"/>
  </div>
  <div class="ep-field">
    <label>Business Name</label>
    <input type="text" id="edit_bizName" placeholder="Your business name"/>
  </div>
</div>

<!-- Lynk -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ“² Lynk</div>
  <div class="ep-field">
    <label>Lynk Payment Link</label>
    <input type="url" id="edit_lynkLink" placeholder="https://lynk.com/pay/yourhandle"/>
    <div class="hint">Customers tap Lynk â†’ goes here directly.</div>
  </div>
  <div class="ep-field">
    <label>Lynk Icon Image URL (optional)</label>
    <input type="url" id="edit_lynkImg" placeholder="https://... or leave blank"/>
  </div>
</div>

<!-- Built-in Bank -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ¦ Primary Bank</div>
  <div class="ep-field"><label>Bank Name</label><input type="text" id="edit_bankName" placeholder="e.g. NCB, Scotiabank"/></div>
  <div class="ep-field"><label>Account Name</label><input type="text" id="edit_bankAccName" placeholder="Account holder name"/></div>
  <div class="ep-field"><label>Account Number</label><input type="text" id="edit_bankAccNum" placeholder="Account number"/></div>
  <div class="ep-field"><label>Routing / Transit #</label><input type="text" id="edit_bankRouting" placeholder="Routing number"/></div>
  <div class="ep-field">
    <label>Bank Icon Image URL (optional)</label>
    <input type="url" id="edit_bankImg" placeholder="https://... or leave blank"/>
  </div>
</div>

<!-- PayPal -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ…¿ï¸ PayPal</div>
  <div class="ep-field">
    <label>PayPal Payment Link</label>
    <input type="url" id="edit_paypalLink" placeholder="https://paypal.me/yourname"/>
    <div class="hint">Customers tap PayPal â†’ goes here directly.</div>
  </div>
  <div class="ep-field">
    <label>PayPal Icon Image URL (optional)</label>
    <input type="url" id="edit_paypalImg" placeholder="https://... or leave blank"/>
  </div>
</div>

<!-- Extra Payment Methods -->
<div class="ep-section">
  <div class="ep-sec-title">
    â• Extra Payment Methods
  </div>
  <div id="extraMethodsList"></div>
  <button class="add-row-btn" onclick="toggleAddForm('addMethodForm')">+ Add Payment Method</button>
  <div class="add-form" id="addMethodForm">
    <div class="add-form-title">New Payment Method</div>
    <div class="ep-field"><label>Name</label><input type="text" id="nm_name" placeholder="e.g. CashApp, Zelle, MoneyGram"/></div>
    <div class="ep-field"><label>Payment Link</label><input type="url" id="nm_link" placeholder="https://..."/></div>
    <div class="ep-field"><label>Emoji Icon</label><input type="text" id="nm_emoji" placeholder="e.g. ğŸ’¸ ğŸ’³ ğŸ§" maxlength="4"/></div>
    <div class="ep-field"><label>Icon Image URL (optional â€” overrides emoji)</label><input type="url" id="nm_img" placeholder="https://..."/></div>
    <div class="form-btns">
      <button class="form-btn cancel" onclick="toggleAddForm('addMethodForm')">Cancel</button>
      <button class="form-btn confirm" onclick="addExtraMethod()">Add</button>
    </div>
  </div>
</div>

<!-- Extra Banks -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ¦ Extra Banks</div>
  <div id="extraBanksList"></div>
  <button class="add-row-btn" onclick="toggleAddForm('addBankForm')">+ Add Bank</button>
  <div class="add-form" id="addBankForm">
    <div class="add-form-title">New Bank</div>
    <div class="ep-field"><label>Bank Name</label><input type="text" id="nb_name" placeholder="e.g. JN Bank"/></div>
    <div class="ep-field"><label>Account Name</label><input type="text" id="nb_accName" placeholder="Account holder"/></div>
    <div class="ep-field"><label>Account Number</label><input type="text" id="nb_accNum" placeholder="Account number"/></div>
    <div class="ep-field"><label>Routing # (optional)</label><input type="text" id="nb_routing" placeholder="Routing number"/></div>
    <div class="ep-field"><label>Icon Image URL (optional)</label><input type="url" id="nb_img" placeholder="https://..."/></div>
    <div class="form-btns">
      <button class="form-btn cancel" onclick="toggleAddForm('addBankForm')">Cancel</button>
      <button class="form-btn confirm" onclick="addExtraBank()">Add</button>
    </div>
  </div>
</div>

<!-- Contact -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ“ Contact Details</div>
  <div class="ep-field"><label>Display Phone</label><input type="text" id="edit_phoneDisplay" placeholder="e.g. 876-XXX-XXXX"/></div>
  <div class="ep-field">
    <label>Dial Digits (for Call button)</label>
    <input type="tel" id="edit_phoneDigits" inputmode="numeric" placeholder="e.g. 8761234567"/>
  </div>
  <div class="ep-field">
    <label>WhatsApp Number (with country code)</label>
    <input type="tel" id="edit_waNumber" inputmode="numeric" placeholder="e.g. 18761234567"/>
    <div class="hint">Include country code. Jamaica = 1876XXXXXXX</div>
  </div>
</div>

<!-- Password -->
<div class="ep-section">
  <div class="ep-sec-title">ğŸ”’ Change Password</div>
  <div class="ep-field">
    <label>New Password (blank = keep current)</label>
    <input type="password" id="edit_newPass" placeholder="Min. 4 characters"/>
  </div>
</div>

<button class="save-btn" onclick="saveAll()">ğŸ’¾ Save All Changes</button>
```

  </div>

  <div class="footer">Andrew's Tech Repair & Sales &nbsp;Â·&nbsp; Secure Payments</div>
</div>

<!-- Password Modal -->

<div class="modal-overlay" id="passModal">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">ğŸ” Owner Access</div>
    <div class="modal-sub">Enter your password to edit.</div>
    <input class="modal-input" type="password" id="passInput" placeholder="Password" onkeydown="if(event.key==='Enter')verifyPass()"/>
    <div class="modal-error" id="passError">Incorrect password. Try again.</div>
    <div class="modal-btns">
      <button class="modal-btn cancel" onclick="closePassModal()">Cancel</button>
      <button class="modal-btn confirm" onclick="verifyPass()">Unlock â€º</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STORAGE HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const S = {
  get:(k,def='')=> { try{return localStorage.getItem('atr_'+k)||def;}catch(e){return def;} },
  set:(k,v)=>      { try{localStorage.setItem('atr_'+k,v);}catch(e){} },
  getJ:(k,def=[])=>{ try{return JSON.parse(localStorage.getItem('atr_'+k)||'null')||def;}catch(e){return def;} },
  setJ:(k,v)=>     { try{localStorage.setItem('atr_'+k,JSON.stringify(v));}catch(e){} }
};
const getPass = ()=> S.get('pass','admin1234');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let extraMethods = []; // [{id,name,link,emoji,img}]
let extraBanks   = []; // [{id,name,accName,accNum,routing,img}]

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT â€” load everything on page load
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function init(){
  // Business name
  const biz = S.get('bizName');
  if(biz) document.getElementById('dispBizName').textContent = biz;

  // Logo
  const logoImg = S.get('logoImg');
  const logoEmoji = S.get('logoEmoji','ğŸ”§');
  applyLogo(logoImg, logoEmoji);

  // Built-in icons
  applyMethodIcon('lynkIcon',  S.get('lynkImg'),  'ğŸ“²', 'icon-lynk');
  applyMethodIcon('bankIcon',  S.get('bankImg'),  'ğŸ¦', 'icon-bank');
  applyMethodIcon('paypalIcon',S.get('paypalImg'),'ğŸ…¿ï¸', 'icon-paypal');

  // Bank details
  setText('d_bankName',    S.get('bankName','â€”'));
  setText('d_bankAccName', S.get('bankAccName','â€”'));
  setText('d_bankAccNum',  S.get('bankAccNum','â€”'));
  setText('d_bankRouting', S.get('bankRouting','â€”'));

  // Contact
  setText('dispPhone', S.get('phoneDisplay','876-XXX-XXXX'));
  const digits = S.get('phoneDigits','').replace(/\D/g,'');
  const waNum  = S.get('waNumber','').replace(/\D/g,'');
  document.getElementById('callBtn').href      = digits ? 'tel:+'+digits : 'tel:';
  document.getElementById('waContactBtn').href = waNum  ? 'https://wa.me/'+waNum : '#';

  // Extra methods & banks
  extraMethods = S.getJ('extraMethods',[]);
  extraBanks   = S.getJ('extraBanks',[]);
  renderExtraMethods();
  renderExtraBanks();

  // Show edit badge on logo when in edit mode
  document.getElementById('logoWrap').addEventListener('click',()=>{
    if(document.getElementById('editPanel').classList.contains('open')){
      document.getElementById('logoFileInput').click();
    }
  });
}

function setText(id,val){ const el=document.getElementById(id); if(el) el.textContent=val; }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOGO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyLogo(imgData, emoji){
  const emojiEl = document.getElementById('logoEmoji');
  const imgEl   = document.getElementById('logoImgEl');
  if(imgData){
    imgEl.src = imgData;
    imgEl.classList.add('loaded');
    if(emojiEl) emojiEl.style.display='none';
  } else {
    imgEl.classList.remove('loaded');
    if(emojiEl){ emojiEl.style.display=''; emojiEl.textContent = emoji||'ğŸ”§'; }
  }
  // edit preview
  const ep = document.getElementById('editLogoPreview');
  const epImg = document.getElementById('editLogoImg');
  const epEmoji = document.getElementById('editLogoEmoji');
  if(ep && epImg){
    if(imgData){ epImg.src=imgData; epImg.classList.add('loaded'); if(epEmoji) epEmoji.style.display='none'; }
    else { epImg.classList.remove('loaded'); if(epEmoji){ epEmoji.style.display=''; epEmoji.textContent=emoji||'ğŸ”§'; } }
  }
}

function handleLogoUpload(input){
  const file = input.files[0];
  if(!file) return;
  if(file.size > 2*1024*1024){ showToast('Image too large (max 2MB)','err'); return; }
  const reader = new FileReader();
  reader.onload = e => {
    const data = e.target.result;
    S.set('logoImg', data);
    applyLogo(data, S.get('logoEmoji','ğŸ”§'));
    showToast('âœ… Logo updated!');
  };
  reader.readAsDataURL(file);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  METHOD ICON (supports image URL)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyMethodIcon(elId, imgUrl, fallbackEmoji, cssClass){
  const el = document.getElementById(elId);
  if(!el) return;
  el.innerHTML = '';
  if(imgUrl && imgUrl.startsWith('http')){
    const img = document.createElement('img');
    img.src = imgUrl;
    img.alt = '';
    img.onerror = ()=>{ el.innerHTML='<span>'+fallbackEmoji+'</span>'; };
    el.appendChild(img);
    el.className = 'method-icon';
  } else {
    el.className = 'method-icon '+(cssClass||'icon-custom');
    el.innerHTML = '<span>'+fallbackEmoji+'</span>';
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  OPEN PAYMENT LINK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openLink(type){
  const map = {lynk:'lynkLink', paypal:'paypalLink'};
  const link = S.get(map[type],'');
  if(!link){ showToast('âš ï¸ No link set â€” tap Edit','warn'); return; }
  window.open(link,'_blank');
}
function openCustomLink(link){
  if(!link){ showToast('âš ï¸ No link set','warn'); return; }
  window.open(link,'_blank');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BANK TOGGLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleBank(detailsId, headerId){
  const d = document.getElementById(detailsId);
  const h = document.getElementById(headerId);
  const open = d.classList.contains('open');
  d.classList.toggle('open',!open);
  h.classList.toggle('open',!open);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER EXTRA METHODS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderExtraMethods(){
  const container = document.getElementById('extraMethods');
  container.innerHTML = '';
  extraMethods.forEach(m=>{
    const div = document.createElement('div');
    div.className='pay-card';
    div.style.cssText='margin-bottom:0;';
    div.onclick=()=>openCustomLink(m.link);
    div.innerHTML=`
      <div class="method-icon icon-custom" id="xm_icon_${m.id}"><span>${m.emoji||'ğŸ’³'}</span></div>
      <div class="method-info">
        <div class="method-name">${esc(m.name)}</div>
        <div class="method-sub">Tap to pay via ${esc(m.name)}</div>
      </div>
      <span class="pay-badge badge-go">Pay Now</span>
      <span class="chevron">â€º</span>`;
    container.appendChild(div);
    if(m.img) applyMethodIcon('xm_icon_'+m.id, m.img, m.emoji||'ğŸ’³');
  });

  // Edit panel list
  const list = document.getElementById('extraMethodsList');
  if(!list) return;
  list.innerHTML='';
  extraMethods.forEach(m=>{
    const d=document.createElement('div'); d.className='added-item';
    d.innerHTML=`<span style="font-size:18px">${m.emoji||'ğŸ’³'}</span><span class="added-item-name">${esc(m.name)}</span><button class="del-btn" onclick="delMethod('${m.id}')">Remove</button>`;
    list.appendChild(d);
  });
}

function addExtraMethod(){
  const name  = document.getElementById('nm_name').value.trim();
  const link  = document.getElementById('nm_link').value.trim();
  const emoji = document.getElementById('nm_emoji').value.trim()||'ğŸ’³';
  const img   = document.getElementById('nm_img').value.trim();
  if(!name||!link){ showToast('Name & link required','warn'); return; }
  extraMethods.push({id:'m_'+Date.now(), name, link, emoji, img});
  S.setJ('extraMethods', extraMethods);
  renderExtraMethods();
  ['nm_name','nm_link','nm_emoji','nm_img'].forEach(id=>document.getElementById(id).value='');
  toggleAddForm('addMethodForm');
  showToast('âœ… '+name+' added!');
}

function delMethod(id){
  extraMethods = extraMethods.filter(m=>m.id!==id);
  S.setJ('extraMethods', extraMethods);
  renderExtraMethods();
  showToast('Removed');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER EXTRA BANKS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderExtraBanks(){
  const container = document.getElementById('extraBanks');
  container.innerHTML='';
  extraBanks.forEach(b=>{
    const uid='xb_'+b.id;
    const div=document.createElement('div');
    div.className='bank-card';
    div.style.marginBottom='0';
    div.innerHTML=`
      <div class="bank-header" id="h_${uid}" onclick="toggleBank('d_${uid}','h_${uid}')">
        <div class="method-icon icon-bank" id="icon_${uid}"><span>ğŸ¦</span></div>
        <div class="method-info">
          <div class="method-name">${esc(b.name)}</div>
          <div class="method-sub">Tap to view account details</div>
        </div>
        <span class="pay-badge badge-detail">Details</span>
        <span class="chevron">â€º</span>
      </div>
      <div class="bank-details" id="d_${uid}">
        <div class="d-row"><span class="d-key">Bank</span><span class="d-val">${esc(b.name)}</span></div>
        <div class="d-row"><span class="d-key">Acc. Name</span><span class="d-val" id="v_an_${uid}">${esc(b.accName)}</span><button class="copy-btn" onclick="cpv('v_an_${uid}',this)">Copy</button></div>
        <div class="d-row"><span class="d-key">Account #</span><span class="d-val" id="v_ac_${uid}">${esc(b.accNum)}</span><button class="copy-btn" onclick="cpv('v_ac_${uid}',this)">Copy</button></div>
        ${b.routing?`<div class="d-row"><span class="d-key">Routing #</span><span class="d-val" id="v_rt_${uid}">${esc(b.routing)}</span><button class="copy-btn" onclick="cpv('v_rt_${uid}',this)">Copy</button></div>`:''}
        <div class="d-hint">Use your name + invoice number as the transfer reference.</div>
      </div>`;
    container.appendChild(div);
    if(b.img) applyMethodIcon('icon_'+uid, b.img, 'ğŸ¦', 'icon-bank');
  });

  const list=document.getElementById('extraBanksList');
  if(!list) return;
  list.innerHTML='';
  extraBanks.forEach(b=>{
    const d=document.createElement('div'); d.className='added-item';
    d.innerHTML=`<span style="font-size:18px">ğŸ¦</span><span class="added-item-name">${esc(b.name)}</span><button class="del-btn" onclick="delBank('${b.id}')">Remove</button>`;
    list.appendChild(d);
  });
}

function addExtraBank(){
  const name    = document.getElementById('nb_name').value.trim();
  const accName = document.getElementById('nb_accName').value.trim();
  const accNum  = document.getElementById('nb_accNum').value.trim();
  const routing = document.getElementById('nb_routing').value.trim();
  const img     = document.getElementById('nb_img').value.trim();
  if(!name||!accName||!accNum){ showToast('Name, account name & number required','warn'); return; }
  extraBanks.push({id:'b_'+Date.now(), name, accName, accNum, routing, img});
  S.setJ('extraBanks', extraBanks);
  renderExtraBanks();
  ['nb_name','nb_accName','nb_accNum','nb_routing','nb_img'].forEach(id=>document.getElementById(id).value='');
  toggleAddForm('addBankForm');
  showToast('âœ… '+name+' added!');
}

function delBank(id){
  extraBanks = extraBanks.filter(b=>b.id!==id);
  S.setJ('extraBanks', extraBanks);
  renderExtraBanks();
  showToast('Removed');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ADD FORM TOGGLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleAddForm(id){
  const f=document.getElementById(id);
  f.classList.toggle('open');
  if(f.classList.contains('open')) f.scrollIntoView({behavior:'smooth',block:'nearest'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  COPY VALUE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function cpv(id,btn){
  const text=document.getElementById(id)?.textContent?.trim();
  if(!text||text==='â€”'){ showToast('Nothing to copy','warn'); return; }
  navigator.clipboard.writeText(text).then(()=>{
    const orig=btn.textContent; btn.textContent='âœ“'; btn.classList.add('copied');
    showToast('Copied!');
    setTimeout(()=>{ btn.textContent=orig; btn.classList.remove('copied'); },2000);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PASSWORD MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openPassModal(){
  const pi=document.getElementById('passInput');
  pi.value=''; pi.classList.remove('err');
  document.getElementById('passError').style.display='none';
  document.getElementById('passModal').classList.add('open');
  setTimeout(()=>pi.focus(),200);
}
function closePassModal(){ document.getElementById('passModal').classList.remove('open'); }
function verifyPass(){
  const val=document.getElementById('passInput').value;
  if(val===getPass()){
    closePassModal();
    prefillEdit();
    const ep=document.getElementById('editPanel');
    ep.classList.add('open');
    // show edit badge on logo
    document.getElementById('logoBadge').style.display='block';
    setTimeout(()=>ep.scrollIntoView({behavior:'smooth',block:'start'}),150);
  } else {
    const pi=document.getElementById('passInput');
    document.getElementById('passError').style.display='block';
    pi.classList.add('err'); pi.value=''; pi.focus();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  EDIT PANEL PREFILL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function prefillEdit(){
  const map=[
    ['edit_bizName','bizName'],['edit_logoEmoji','logoEmoji','ğŸ”§'],
    ['edit_lynkLink','lynkLink'],['edit_lynkImg','lynkImg'],
    ['edit_bankName','bankName'],['edit_bankAccName','bankAccName'],
    ['edit_bankAccNum','bankAccNum'],['edit_bankRouting','bankRouting'],['edit_bankImg','bankImg'],
    ['edit_paypalLink','paypalLink'],['edit_paypalImg','paypalImg'],
    ['edit_phoneDisplay','phoneDisplay'],['edit_phoneDigits','phoneDigits'],
    ['edit_waNumber','waNumber'],
  ];
  map.forEach(([elId,key,def])=>{
    const el=document.getElementById(elId);
    if(el) el.value=S.get(key,def||'');
  });
  document.getElementById('edit_newPass').value='';
  renderExtraMethods();
  renderExtraBanks();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SAVE ALL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function saveAll(){
  // Business name
  const biz=document.getElementById('edit_bizName').value.trim();
  if(biz){ S.set('bizName',biz); document.getElementById('dispBizName').textContent=biz; }

  // Logo emoji
  const emoji=document.getElementById('edit_logoEmoji').value.trim();
  if(emoji){ S.set('logoEmoji',emoji); document.getElementById('logoEmoji').textContent=emoji; document.getElementById('editLogoEmoji').textContent=emoji; }

  // Links & icons
  const fields=[
    ['edit_lynkLink','lynkLink'],['edit_lynkImg','lynkImg'],
    ['edit_bankName','bankName'],['edit_bankAccName','bankAccName'],
    ['edit_bankAccNum','bankAccNum'],['edit_bankRouting','bankRouting'],['edit_bankImg','bankImg'],
    ['edit_paypalLink','paypalLink'],['edit_paypalImg','paypalImg'],
    ['edit_phoneDisplay','phoneDisplay'],['edit_phoneDigits','phoneDigits'],
    ['edit_waNumber','waNumber'],
  ];
  fields.forEach(([elId,key])=>{
    const val=document.getElementById(elId)?.value.trim();
    if(val) S.set(key,val);
  });

  // Refresh bank details display
  setText('d_bankName',    S.get('bankName','â€”'));
  setText('d_bankAccName', S.get('bankAccName','â€”'));
  setText('d_bankAccNum',  S.get('bankAccNum','â€”'));
  setText('d_bankRouting', S.get('bankRouting','â€”'));

  // Refresh icons
  applyMethodIcon('lynkIcon',  S.get('lynkImg'),  'ğŸ“²','icon-lynk');
  applyMethodIcon('bankIcon',  S.get('bankImg'),  'ğŸ¦','icon-bank');
  applyMethodIcon('paypalIcon',S.get('paypalImg'),'ğŸ…¿ï¸','icon-paypal');

  // Phone / WhatsApp
  setText('dispPhone', S.get('phoneDisplay','876-XXX-XXXX'));
  const digits=S.get('phoneDigits','').replace(/\D/g,'');
  const waNum =S.get('waNumber','').replace(/\D/g,'');
  document.getElementById('callBtn').href      = digits?'tel:+'+digits:'tel:';
  document.getElementById('waContactBtn').href = waNum?'https://wa.me/'+waNum:'#';

  // Password
  const np=document.getElementById('edit_newPass').value.trim();
  if(np.length>0&&np.length<4){ showToast('Password min 4 chars','warn'); return; }
  if(np.length>=4) S.set('pass',np);

  showToast('âœ… Saved!');
  setTimeout(()=>closeEdit(),1200);
}

function closeEdit(){
  document.getElementById('editPanel').classList.remove('open');
  document.getElementById('logoBadge').style.display='none';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SHARE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function copyLink(){
  navigator.clipboard.writeText(window.location.href)
    .then(()=>showToast('ğŸ”— Link copied!'));
}
function shareWA(){
  const amount=document.getElementById('amountInput').value;
  const note  =document.getElementById('noteInput').value.trim();
  const url   =window.location.href;
  const waNum =S.get('waNumber','').replace(/\D/g,'');
  let msg=`Hi! Payment details for *${S.get('bizName',"Andrew's Tech Repair & Sales")}*.\n`;
  if(amount) msg+=`\nğŸ’° *Amount:* JMD $${parseFloat(amount).toLocaleString()}\n`;
  if(note)   msg+=`ğŸ“ *Note:* ${note}\n`;
  msg+=`\nğŸ‘‡ Choose payment method:\n${url}`;
  const base=waNum?`https://wa.me/${waNum}`:'https://wa.me/';
  window.open(base+'?text='+encodeURIComponent(msg),'_blank');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showToast(msg,type=''){
  const t=document.getElementById('toast');
  t.textContent=msg;
  t.className='toast'+(type?' '+type:'');
  t.classList.add('show');
  clearTimeout(t._timer);
  t._timer=setTimeout(()=>t.classList.remove('show'),2600);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  UTIL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function esc(s){ const d=document.createElement('div'); d.textContent=s||''; return d.innerHTML; }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BOOT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
init();
</script>

</body>
</html>